<div class="main-tab">
    <div class="attributes border">
        <h1>{{localize "ATTRIBUTES"}}</h1>
        {{#each data.attribute as |attribute key|}}
        <div class="name">
            <button type="button" class="roll-attribute" data-attribute="{{key}}">{{localize attribute.label}}</button>
        </div>
        <div class="value">
            <input class="set-attribute current" name="data.attribute.{{key}}.value" type="number" value="{{attribute.value}}" title="Current value" disabled />
            /&nbsp;&nbsp;
            <input class="set-attribute max" name="data.attribute.{{key}}.max" type="number" value="{{attribute.max}}" data-attribute="{{key}}" data-dtype="Number" title="Max value" />
            <input class="set-attribute buffer" name="data.attribute.{{key}}.buffer" type="number" value="{{attribute.buffer}}" data-attribute="{{key}}" data-dtype="Number" title="Buffer" />
            <input class="set-attribute damage" name="data.attribute.{{key}}.damage" type="number" value="{{attribute.damage}}" data-attribute="{{key}}" data-dtype="Number" title="Damage" />
        </div>
        <div class="skulls {{#unless attribute.value }}broken{{/unless}}">
            <a class="change-attribute" data-attribute="{{key}}">
                {{#bufferedSkulls attribute.damage attribute.max attribute.buffer}}
                <i class="skull far {{#if @damaged}}fa-times-circle{{else}}fa-circle{{/if}} {{#if @buffered}}buffer{{/if}}"></i>
                {{/bufferedSkulls}}
            </a>
        </div>
        {{/each}}
    </div>

    <div class="skills experience border">
        <h1>{{localize "HEADER.EXPERIENCE"}}</h1>
        <div class="name">{{localize "XP.RECEIVED"}}</div>
        <input name="data.bio.experience.value" type="number" value="{{data.bio.experience.value}}" data-dtype="Number" />
        <div class="name">{{localize "XP.START"}}</div>
        <div class="value">{{ data.computedExperience.start }}</div>
        <div class="name">{{localize "XP.SPENT"}}</div>
        <div class="value">{{ data.computedExperience.spent }}</div>
        <div class="name">{{localize "XP.FREE"}}</div>
        <div class="value">{{ data.computedExperience.free }}</div>
    </div>

    <div class="skills strength border">
        <h1>{{localize "ATTRIBUTE.STRENGTH"}}</h1>
        {{#each data.skill as |skill key|}}
        {{#if skill.hasStrength}}
        <div class="name"><button type="button" class="roll-skill" data-skill="{{key}}">{{localize skill.label}}</button></div>
        <input name="data.skill.{{key}}.value" type="number" value="{{skill.value}}" min="{{skill.min}}"
            data-dtype="Number" />
        {{/if}}
        {{/each}}
    </div>

    <div class="skills agility border">
        <h1>{{localize "ATTRIBUTE.AGILITY"}}</h1>
        {{#each data.skill as |skill key|}}
        {{#if skill.hasAgility}}
        <div class="name"><button type="button" class="roll-skill" data-skill="{{key}}">{{localize skill.label}}</button></div>
        <input name="data.skill.{{key}}.value" type="number" value="{{skill.value}}" min="{{skill.min}}"
            data-dtype="Number" />
        {{/if}}
        {{/each}}
    </div>

    <div class="skills conditions border">
        <h1>{{localize "HEADER.CONDITION"}}</h1>
        <div class="name">
            <a class="condition {{# if data.condition.sleepy.value}}active{{/if}}" data-condition="sleepy">
                {{localize "CONDITION.SLEEPY"}}
            </a>
        </div>
        <div class="value">
            <a class="condition {{# if data.condition.sleepy.value}}active{{/if}}" data-condition="sleepy">
                <i class="far {{#if data.condition.sleepy.value}}fa-times-circle{{else}}fa-circle{{/if}}"></i>
            </a>
        </div>
        <div class="name">
            <a class="condition {{# if data.condition.thirsty.value}}active{{/if}}" data-condition="thirsty"
                title="{{localize "CONDITION.THIRSTY"}}">
                {{localize "CONDITION.THIRSTY"}}
            </a>
        </div>
        <div class="value">
            <a class="condition {{# if data.condition.thirsty.value}}active{{/if}}" data-condition="thirsty"
                title="{{localize "CONDITION.THIRSTY"}}">
                <i class="far {{#if data.condition.thirsty.value}}fa-times-circle{{else}}fa-circle{{/if}}"></i>
            </a>
        </div>
        <div class="name">
            <a class="condition {{# if data.condition.hungry.value}}active{{/if}}" data-condition="hungry"
                title="{{localize "CONDITION.HUNGRY"}}">
                {{localize "CONDITION.HUNGRY"}}
            </a>
        </div>
        <div class="value">
            <a class="condition {{# if data.condition.hungry.value}}active{{/if}}" data-condition="hungry"
                title="{{localize "CONDITION.HUNGRY"}}">
                <i class="far {{#if data.condition.hungry.value}}fa-times-circle{{else}}fa-circle{{/if}}"></i>
            </a>
        </div>
        <div class="name">
            <a class="condition {{# if data.condition.cold.value}}active{{/if}}" data-condition="cold"
                title="{{localize "CONDITION.COLD"}}">
                {{localize "CONDITION.COLD"}}
            </a>
        </div>
        <div class="value">
            <a class="condition {{# if data.condition.cold.value}}active{{/if}}" data-condition="cold"
                title="{{localize "CONDITION.COLD"}}">
                <i class="far {{#if data.condition.cold.value}}fa-times-circle{{else}}fa-circle{{/if}}"></i>
            </a>
        </div>
    </div>

    <div class="skills wits border">
        <h1>{{localize "ATTRIBUTE.WITS"}}</h1>
        {{#each data.skill as |skill key|}}
        {{#if skill.hasWits}}
        <div class="name"><button type="button" class="roll-skill" data-skill="{{key}}">{{localize skill.label}}</button></div>
        <input name="data.skill.{{key}}.value" type="number" value="{{skill.value}}" min="{{skill.min}}"
            data-dtype="Number" />
        {{/if}}
        {{/each}}
    </div>

    <div class="skills empathy border">
        <h1>{{localize "ATTRIBUTE.EMPATHY"}}</h1>
        {{#each data.skill as |skill key|}}
        {{#if skill.hasEmpathy}}
        <div class="name"><button type="button" class="roll-skill" data-skill="{{key}}">{{localize skill.label}}</button></div>
        <input name="data.skill.{{key}}.value" type="number" value="{{skill.value}}" min="{{skill.min}}"
            data-dtype="Number" />
        {{/if}}
        {{/each}}
    </div>

    <div class="critical-injuries border">
        <h1>{{localize "HEADER.CRITICAL_INJURY"}}</h1>
        <div class="item-list">
            <div class="header flex row">
                <div class="name grow">
                    <b>{{localize "CRITICAL_INJURY.NAME"}}</b>
                </div>
                <a class="button item-create" title="Add Critical Injury" data-type="criticalInjury"><i
                        class="fas fa-plus"></i></a>
            </div>
            <div class="items">
                {{#each actor.items as |item|}}
                {{#if item.isCriticalInjury}}
                <div class="critical-injury item flex row" data-item-id="{{item._id}}">
                    <div class="name grow">
                        <a class="item-edit" title="Edit Critical Injury">{{item.name}}</a>
                    </div>
                    <div class="button">
                        <a class="item-control item-delete" title="Delete Critical Injury"><i
                                class="fas fa-trash"></i></a>
                    </div>
                </div>
                {{/if}}
                {{/each}}
            </div>
        </div>
    </div>
</div>
